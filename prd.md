# 照護排班系統 PRD

## 產品概述

照護排班系統用於管理多院區護理人員的班表調度，提供即時監控與缺口預警功能。

---

## 功能模組

### 1. 手動調整班表

#### 1.1 功能描述
管理者可手動編輯、調整已排定的班表。

#### 1.2 使用情境
- 人員臨時請假需換班
- 人力需求變動需增減班次
- 修正排班錯誤

#### 1.3 功能需求
| 編號 | 需求 | 優先級 |
|------|------|--------|
| M1-1 | 拖拉式班表調整介面 | P0 |
| M1-2 | 調整時顯示衝突提示（重複排班、超時） | P0 |
| M1-3 | 調整歷史紀錄與還原功能 | P1 |
| M1-4 | 批次調整多人班表 | P1 |
| M1-5 | 調整原因註記欄位 | P2 |

#### 1.4 業務規則
- 調整後需符合勞基法工時規範
- 同一人同時段不可重複排班
- 調整需記錄操作者與時間戳記

---

### 2. 跨院調度

#### 2.1 功能描述
支援不同院區間的人力調度與支援排班。

#### 2.2 使用情境
- A 院人力不足，從 B 院調派支援
- 特定專業人員跨院支援
- 緊急狀況人力調配

#### 2.3 功能需求
| 編號 | 需求 | 優先級 |
|------|------|--------|
| M2-1 | 查看各院區人力狀態總覽 | P0 |
| M2-2 | 發起跨院調度申請 | P0 |
| M2-3 | 調度審核流程（原院區主管核准） | P0 |
| M2-4 | 跨院人員班表同步顯示 | P1 |
| M2-5 | 調度交通/津貼自動計算 | P2 |

#### 2.4 業務規則
- 跨院調度需原院區主管同意
- 調度人員資格需符合目標院區需求
- 調度紀錄需同步更新至兩院區班表

---

### 3. 匯出 Excel / PDF

#### 3.1 功能描述
將班表資料匯出為 Excel 或 PDF 格式。

#### 3.2 使用情境
- 列印紙本班表公告
- 提供人資部門薪資計算
- 存檔備查

#### 3.3 功能需求
| 編號 | 需求 | 優先級 |
|------|------|--------|
| M3-1 | 匯出週班表 / 月班表 | P0 |
| M3-2 | 自訂匯出欄位 | P1 |
| M3-3 | 匯出格式選擇（Excel / PDF） | P0 |
| M3-4 | 批次匯出多單位班表 | P1 |
| M3-5 | 排版樣式範本選擇 | P2 |

#### 3.4 匯出欄位
- 人員姓名、工號
- 日期、班別（白班/小夜/大夜）
- 時數統計
- 備註

---

### 4. 監控與通知

#### 4.1 功能描述
即時監控班表狀態，異常情況主動推播通知。

#### 4.2 通知類型

##### 4.2.1 Leader 缺口即時通知
| 編號 | 需求 | 優先級 |
|------|------|--------|
| M4-1 | 每日班表 Leader 配置檢核 | P0 |
| M4-2 | 缺口發現後 5 分鐘內推播通知 | P0 |
| M4-3 | 通知對象：單位主管、排班負責人 | P0 |
| M4-4 | 通知包含缺口時段與建議人選 | P1 |

##### 4.2.2 臨時請假造成白班無 Leader 通知
| 編號 | 需求 | 優先級 |
|------|------|--------|
| M4-5 | 請假申請即時觸發 Leader 檢核 | P0 |
| M4-6 | 白班 Leader 缺口立即警示 | P0 |
| M4-7 | 顯示可替代 Leader 人選清單 | P0 |
| M4-8 | 一鍵發送支援請求給候選人 | P1 |

#### 4.3 通知管道
- 系統內推播
- LINE Notify / 企業通訊軟體
- Email
- SMS（緊急狀況）

#### 4.4 業務規則
- 白班定義：08:00 - 16:00（可設定）
- Leader 最低配置：每班至少 1 人
- 通知升級機制：未處理超過 30 分鐘通知上級主管

---

## 角色權限

| 角色 | 手動調整 | 跨院調度 | 匯出 | 接收通知 |
|------|----------|----------|------|----------|
| 系統管理員 | ✓ 全院區 | ✓ 審核 | ✓ | ✓ |
| 院區主管 | ✓ 本院區 | ✓ 申請/審核 | ✓ | ✓ |
| 單位主管 | ✓ 本單位 | ✓ 申請 | ✓ | ✓ |
| 排班人員 | ✓ 本單位 | 僅檢視 | ✓ | ✓ |
| 一般人員 | 僅檢視 | 僅檢視 | 本人 | 本人班表 |

---

## 非功能需求

| 項目 | 規格 |
|------|------|
| 通知延遲 | ≤ 5 分鐘 |
| 系統可用性 | 99.5% |
| 同時上線人數 | 500 人 |
| 班表載入時間 | ≤ 2 秒 |

---

## 名詞定義

| 名詞 | 定義 |
|------|------|
| Leader | 具備督導資格的護理人員，負責該班次的領班工作 |
| 白班 | 日間班次，預設 08:00-16:00 |
| 小夜 | 傍晚班次，預設 16:00-24:00 |
| 大夜 | 夜間班次，預設 00:00-08:00 |
| 跨院調度 | 人員從原屬院區至其他院區支援 |

---

## 待確認事項

- [ ] 各院區 Leader 最低配置人數
- [ ] 跨院調度審核層級與流程
- [ ] 通知管道優先順序
- [ ] 班別時段是否需要各院區自訂
- [ ] 匯出報表是否需要主管簽核欄位
